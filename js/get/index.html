<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shift Logger</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 2em;
        }

        label {
            display: block;
            margin-top: 1em;
        }

        input, textarea {
            width: 100%;
        }

        textarea {
            height: 80px;
        }

        button {
            margin-top: 1em;
        }

        .log {
            margin-top: 2em;
            border-top: 1px solid #ccc;
            padding-top: 1em;
        }
    </style>
</head>
<body>
    <h1>Shift Logger</h1>

    <label for="providerInput">Provider:</label>
    <input type="text" id="providerInput">

    <label for="shiftDate">Shift Date:</label>
    <input type="date" id="shiftDate">

    <label for="amountPaid">Amount Paid by Provider ($):</label>
    <input type="number" id="amountPaid" step="0.01">

    <label for="tipAmount">Tip ($):</label>
    <input type="number" id="tipAmount" step="0.01">

    <label for="paidMiles">Paid Miles:</label>
    <input type="number" id="paidMiles" step="0.1">

    <label for="gigDetails">Gig Notes:</label>
    <textarea id="gigDetails" placeholder="Optional notes..."></textarea>

    <button id="saveShift">Save Shift</button>

    <div class="log" id="shiftLog"></div>

    <script>
        const providerInput = document.getElementById("providerInput");
        const shiftDate = document.getElementById("shiftDate");
        const amountPaid = document.getElementById("amountPaid");
        const tipAmount = document.getElementById("tipAmount");
        const paidMiles = document.getElementById("paidMiles");
        const gigDetails = document.getElementById("gigDetails");
        const saveShift = document.getElementById("saveShift");
        const shiftLog = document.getElementById("shiftLog");

        // Load last provider
        const lastProvider = localStorage.getItem("lastProvider");
        if (lastProvider) providerInput.value = lastProvider;

        saveShift.addEventListener("click", () => {
            const provider = providerInput.value.trim();
            const date = shiftDate.value;
            const paid = parseFloat(amountPaid.value);
            const tip = parseFloat(tipAmount.value);
            const miles = parseFloat(paidMiles.value);
            const notes = gigDetails.value.trim();

            if (!provider || !date || isNaN(paid) || isNaN(tip) || isNaN(miles)) {
                alert("Please fill out all required fields with valid numbers.");
                return;
            }

            localStorage.setItem("lastProvider", provider);

            const shiftEntry = {
                provider,
                date,
                paid,
                tip,
                miles,
                notes
            };

            const entryDiv = document.createElement("div");
            entryDiv.innerHTML = `
            <strong>${date}</strong> - ${provider}<br>
            Paid: $${paid.toFixed(2)} | Tip: $${tip.toFixed(2)} | Miles: ${miles.toFixed(1)}<br>
            <em>${notes}</em>
          `;
            shiftLog.prepend(entryDiv);

            // Clear fields (except provider)
            shiftDate.value = "";
            amountPaid.value = "";
            tipAmount.value = "";
            paidMiles.value = "";
            gigDetails.value = "";
        });
    </script>
</body>
</html>
